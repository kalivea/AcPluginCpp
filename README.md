**readme文档观看顺序：按时间顺序从下往上看**

# 2025.05.16 更新

1. 添加使用COM接口向菜单栏添加菜单的相关代码。
2. 添加把外部CAD图纸转换为CAD块的代码。
3. 柱子单个插入时可以连续点击，直到用户按下esc按键后停止。
4. 柱子编号使用字符进行储存。
5. 增加柱子信息写文件相关代码，现在可以记住当前图纸内已有柱子的信息，可以避免重复输入数字。

## 2025.04.18 更新

1. 新增加block tools 和 dwg tools相关的代码。
2. 重构basic tools相关的代码，把block 工具剥离，形成新的类。
3. 添加一件插入dwg图纸的功能。
4. 其他基础工具更新。

## 2025.03.28 更新

1. 修改自定义梁体的使用过程中发现的bug。
2. 通过工具绘制出来的梁体完全放置在规定图层内，并设置了正确的颜色。
3. 增加绘制平法表示的后端代码。
4. 增加平法表示的前端代码。
5. 增加输入验证模板函数，可以用于验证输入框输入数据的正确性。
6. 增加自定义梁、柱子的工具类，可以提方便其他程序调用相关数据。
7. 增加计算梁体内每排最大钢筋数量的函数。
8. 增加设置字体对齐的函数。

## 2025.03.06 更新

1. 梁添加顶点逻辑进行更新，可以选取最近点进行插入。
2. 优化原有代码逻辑，增加执行效率。
3. 增加反应器回调函数管理单例类，用于管理回调，用于注册、执行任意响应。

## 2025.02.26 更新

1. 添加新版柱子MFC界面，移除老版柱子ui界面。
2. MFC界面缩略图功能更新，使用更好的双缓冲技术绘图，支持自动缩放图形至合适大小的算法。
3. MFC预览框中增加了尺寸显示，可以及时核对信息。

## 2025.02.17 更新

1. 修改各类小bug。
2. 梁自定义实体现在可以通过选择所有自定义柱子从左往右绘制梁体。
3. 梁自定义实体现在可以通过点选修改某个位置的上下翻。
4. 添加点排序功能。

## 2025.02.11 更新

1. 梁自定义实体现在可以添加顶点。
2. 梁自定义实体现在可以拖动夹点来编辑梁实体。

## 2025.02.07 更新

1. 修改bug。
2. 梁可见性变化的点可以自动识别并生成接头。
3. 梁可以添加 “LK x  b*h”。
4. 梁两侧添加堵头功能。

## 2025.02.05 更新

1. 现在可以得到梁体的ID。
2. 增加上翻下翻位置自动增加接头的功能。
3. 其他bug修复。

## 2025.01.31 更新

1. 现在可以识别和已绘制的梁相交的柱子。
2. 添加按照“实体描述”筛选所有实体的方法。

## 2025.01.27 更新

1. 增加梁的捕捉点功能。
2. 增加夹点。

## 2025.01.24 更新

1. 问题：捕捉点不对待解决。

## 2025.01.24 更新

1. 增加计算点到线上的投影点功能。
2. 梁可以通过底边线，顶边线，中心线 这三种方式进行绘制。

## 2025.01.23 更新

1. 修改梁体绘制逻辑。
2. 修改梁体保存可视与不可视的逻辑。
3. 添加关键字选取函数的封装。

## 2025.01.20 更新

1. 增加梁自定义实体功能，可以通过在屏幕上点选绘制梁实体。

## 2025.01.10 更新

1. 修复直线穿过矩形的判断bug。
2. 修复Grid模块相关代码逻辑bug。

## 2025.01.09 更新

增加几何判断函数：
1. 获得自定义柱子矩形包围框。
2. 判断矩形是否在矩形内部。
3. 判断直线是否穿过矩形。
4. 判断线段是否相交，如相交则计算交点。

## 2025.01.08 更新

增加选择集相关函数，可以选择：
1. 任一database内所有实体。
2. 矩形范围内所有实体。
3. 根据指定过滤器选择实体。
4. 选择图层上所有直线实体。

## 2025.01.07 更新

增加选择集功能，可以选定固定图层上的直线进行柱子插入。

## 2025.01.06 更新

解决多重引线的箭头样式问题，可以自动读取自定义柱子的信息自动生成相应的标注。

## 2025.01.02 更新

多重引线功能已经制作完毕，未发现异常导致CAD崩溃。

## 2024.12.29 更新

圆形柱子的预览图bug也已经修改成功。

## 2024.12.28 更新

现在加入了MFC界面，可以实时预览输入的参数生成的自定义柱子是否正确，暂时完成了方柱的预览图编辑，圆形的预览图有点小问题，正在修改中。

## 2024.12.25 更新

自定义实体函数单元测试通过，暂时没有发现其他问题会导致CAD崩溃。

## 2024.12.23 更新

柱子自定义实体现在可以复制粘贴。修改了之前文件的一些小bug

## 2024.12.20 更新

目前完成了柱子的自定义实体绘制。修改了之前文件的一些小bug

### PolaPillar自定义实体说明

编译，加载，看效果的步骤同Grid。

**特殊说明：new 一个自定义实体之后如要使用务必完成函数内置的各类set函数！！哪些是必须参数可以参考checkValue()函数**

## 2024.12.16 更新

把之前的一个.arx文件分成了几个小的.dbx文件，主要更新还是Grid这个功能。

### Grid使用说明

编译整个Project后，打开CAD 务必按照"PolaTools.dbx","PolaCommon.dbx","PolaGrid.dbx","PolaTestDbx.arx"的顺序进行添加，都添加成功后 输入TESTCLASS命令就可以看到效果。
